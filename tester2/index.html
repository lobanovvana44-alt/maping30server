<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love | –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
</head>
<body>

    <div id="maintenance-screen" class="maintenance-overlay hidden">
        <div class="maintenance-content">
            <i class="fa-solid fa-screwdriver-wrench maint-icon"></i>
            <h1>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã</h1>
            <p>–ù–∞ —Å–∞–π—Ç –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–ª–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è —Ç–µ—Ö. —Ä–∞–±–æ—Ç—ã.</p>
            <p class="maint-sub">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∂–∏–¥–∞–π—Ç–µ.</p>
            <div class="loader"></div>
        </div>
    </div>

    <div class="container" id="auth-container">
        <div class="form-box">
            <div class="auth-header-centered">
                <i class="fa-solid fa-fire-flame-curved logo-fire-big"></i>
                <span class="auth-title-text">Love | –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞</span>
            </div>
            <div id="login-form" class="form-content">
                <h2>–í—Ö–æ–¥</h2>
                <input type="text" id="login-nick" placeholder="Nick Name">
                <input type="password" id="login-pass" placeholder="–ü–∞—Ä–æ–ª—å">
                <button class="auth-btn" onclick="loginUser()">–í–æ–π—Ç–∏</button>
                <p class="switch-text">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <span onclick="showRegister()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span></p>
            </div>
            <div id="register-form" class="form-content hidden">
                <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                <input type="text" id="reg-nick" placeholder="Nick Name">
                <input type="password" id="reg-pass" placeholder="–ü–∞—Ä–æ–ª—å">
                <input type="number" id="reg-vk" placeholder="VK ID (–¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)">
                <button class="auth-btn" onclick="registerUser()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                <p class="switch-text">–ï—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <span onclick="showLogin()">–í–æ–π—Ç–∏</span></p>
            </div>
        </div>
    </div>

    <div id="dashboard" class="dashboard hidden">
        <header>
            <div class="header-top">
                <div class="logo-section">
                    <i class="fa-solid fa-fire-flame-curved logo-icon"></i>
                    <span class="logo-text">Love | –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞</span>
                </div>
                <div class="header-actions">
                    <div id="admin-maint-indicator" class="maint-badge hidden">üîß –¢–µ—Ö. —Ä–∞–±–æ—Ç—ã –∞–∫—Ç–∏–≤–Ω—ã</div>
                    
                    <!-- –ö–ù–û–ü–ö–ê –ö–û–õ–û–ö–û–õ–¨–ß–ò–ö (–û–ë–ù–û–í–õ–ï–ù–ê) -->
                    <button id="notif-btn-main" class="notif-btn" onclick="toggleNotifications()" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
                        <i class="fa-regular fa-bell"></i>
                        <span id="notif-badge" class="notif-badge hidden">0</span>
                    </button>

                    <button class="workers-btn" onclick="openWorkersModal()">
                        <i class="fa-solid fa-users"></i> –†–∞–±–æ—Ç–Ω–∏–∫–∏
                    </button>
                    <button id="btn-upload-access" class="download-btn hidden" onclick="openUploadChoice()">
                        <i class="fa-solid fa-cloud-arrow-down"></i> –ó–∞–≥—Ä—É–∑–∫–∞
                    </button>
                    <div class="profile-widget" onclick="openProfile()">
                        <div class="avatar-circle"><img id="header-avatar" src="" alt="Ava"></div>
                        <div class="user-info-mini">
                            <span id="header-nickname" class="nick-text">...</span>
                            <span class="status-text">Online</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="header-bottom">
                <nav class="nav-tabs">
                    <button id="tab-access" class="tab-btn hidden" onclick="switchTab('access')"><i class="fa-solid fa-lock"></i> –î–æ—Å—Ç—É–ø</button>
                    <button id="tab-houses" class="tab-btn" onclick="trySwitchTab('houses')"><i class="fa-solid fa-house"></i> –î–æ–º–∞</button>
                    <button id="tab-biz" class="tab-btn" onclick="trySwitchTab('biz')"><i class="fa-solid fa-briefcase"></i> –ë–∏–∑–Ω–µ—Å</button>
                    <button id="tab-trailers" class="tab-btn" onclick="trySwitchTab('trailers')"><i class="fa-solid fa-trailer"></i> –¢—Ä–µ–π–ª–µ—Ä—ã</button>
                </nav>
                <button class="archive-link" onclick="trySwitchTab('archive')"><i class="fa-solid fa-box-archive"></i> –ê—Ä—Ö–∏–≤</button>
            </div>
        </header>
        
        <main>
            <div id="date-display-container" class="filter-bar-centered hidden" style="margin-top: 20px;">
                <div class="date-pill">
                    <i class="fa-regular fa-calendar"></i> <span id="header-date-text">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                </div>
            </div>

            <div id="search-controls" class="search-bar-container hidden">
                <div class="search-anim-box">
                    <input type="text" id="table-search-input" placeholder="–ü–æ–∏—Å–∫..." oninput="applyFilters()">
                    <button class="search-btn-icon"><i class="fa-solid fa-magnifying-glass"></i></button>
                </div>
                <div style="display: flex; gap: 15px;">
                    <div class="filter-checkbox-box">
                        <input type="checkbox" id="filter-unchecked" onchange="applyFilters()">
                        <label for="filter-unchecked" title="–ù–∏–∫–µ–º –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ">–¢–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω—ã–µ</label>
                    </div>
                    <div class="filter-checkbox-box">
                        <input type="checkbox" id="filter-checked-only" onchange="applyFilters()">
                        <label for="filter-checked-only" title="–ï—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∏–ª–∏ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞" style="color: #00ff88;">–¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ</label>
                    </div>
                </div>
            </div>

            <div id="content-area">
                <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å–≤–µ—Ä—Ö—É.</p>
            </div>
            <div id="lock-screen" class="lock-screen hidden">
                <i class="fa-solid fa-lock lock-big-icon"></i>
                <h2>–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞!</h2>
                <p>–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ <span class="admin-name">Tornado_Love</span>, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø.</p>
            </div>
        </main>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ò -->

    <!-- –û–ö–ù–û –£–í–ï–î–û–ú–õ–ï–ù–ò–ô -->
    <div id="notifications-modal" class="modal-overlay hidden" style="z-index: 2000;">
        <div class="modal-content" style="width: 500px; max-height: 80vh; display: flex; flex-direction: column;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:10px;">
                <h3 style="margin:0;"><i class="fa-regular fa-bell"></i> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                <button class="close-icon" onclick="toggleNotifications()" style="font-size:1.5rem; float:none;">&times;</button>
            </div>
            <div id="notifications-list-container" class="notifications-list">
                <div class="loader"></div>
            </div>
        </div>
    </div>

    <!-- –û–ö–ù–û –û–¢–ü–†–ê–í–ö–ò –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
    <div id="send-notif-modal" class="modal-overlay hidden" style="z-index: 2500;">
        <div class="modal-content" style="width: 500px;">
            <h3>üì¢ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h3>
            <p style="color:#aaa; font-size:0.9rem; margin-bottom:15px;">–≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–≤–∏–¥—è—Ç –≤—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏.</p>
            <div class="add-worker-form">
                <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" id="notif-title-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª">
                <label>–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è</label>
                <textarea id="notif-text-input" class="custom-textarea" style="height:150px;" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç..."></textarea>
                <div class="form-buttons">
                    <button class="save-btn" onclick="sendNotification()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    <button class="logout-btn" onclick="closeSendNotificationModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ù–ê–°–¢–†–û–ô–ö–ò -->
    <div id="settings-modal" class="modal-overlay hidden" style="z-index: 3100;">
        <div class="modal-content" style="width: 450px;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                <h3 style="margin:0;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                <button class="close-icon" onclick="closeSettingsModal()" style="float:none;">‚úñ</button>
            </div>
            
            <div class="settings-section">
                <div class="settings-title">–¶–≤–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</div>
                <div class="colors-grid">
                    <div class="theme-btn" style="background:#e94560;" onclick="applyTheme('default')" title="Default"></div>
                    <div class="theme-btn" style="background:#ff007f;" onclick="applyTheme('pink')" title="Pink"></div>
                    <div class="theme-btn" style="background:#00ff88;" onclick="applyTheme('green')" title="Green"></div>
                    <div class="theme-btn" style="background:#ff4757;" onclick="applyTheme('red')" title="Red"></div>
                    <div class="theme-btn" style="background:#ffffff; border:1px solid #999;" onclick="applyTheme('black')" title="Black/Dark"></div>
                </div>
            </div>

            <div class="settings-section">
                <div class="settings-title">–°—Ç—Ä–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ</div>
                <select id="rows-per-page-select" class="custom-input-select" onchange="changeRowsPerPage(this.value)">
                    <option value="25">25 —Å—Ç—Ä–æ–∫</option>
                    <option value="50">50 —Å—Ç—Ä–æ–∫</option>
                    <option value="100">100 —Å—Ç—Ä–æ–∫ (–°—Ç–∞–Ω–¥–∞—Ä—Ç)</option>
                    <option value="150">150 —Å—Ç—Ä–æ–∫ (–ú–æ–∂–µ—Ç –ª–∞–≥–∞—Ç—å)</option>
                    <option value="250">250 —Å—Ç—Ä–æ–∫ (–õ–∞–≥–∞–µ—Ç)</option>
                </select>
            </div>

            <button class="logout-btn" onclick="closeSettingsModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div id="fix-vk-modal" class="modal-overlay hidden" style="z-index: 9999;">
        <div class="modal-content warning-card" style="width: 400px; border-color: #0077ff; box-shadow: 0 0 30px rgba(0, 119, 255, 0.3);">
            <i class="fa-brands fa-vk warning-icon" style="color: #0077ff;"></i>
            <h3>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ VK ID</h3>
            <p style="margin-bottom: 15px;">–í–∞—à —Ç–µ–∫—É—â–∏–π VK ID —É–∫–∞–∑–∞–Ω –Ω–µ–≤–µ—Ä–Ω–æ (—Å—Å—ã–ª–∫–∞ –∏–ª–∏ —Ç–µ–∫—Å—Ç).</p>
            <p style="color:#aaa; font-size:0.9rem; margin-bottom:10px;">–£–∫–∞–∂–∏—Ç–µ —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã (–º–∏–Ω–∏–º—É–º 4 –∑–Ω–∞–∫–∞).</p>
            <input type="number" id="fix-vk-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 478328">
            <button class="action-btn" onclick="saveCorrectedVkId()" style="background: #0077ff; margin-top: 10px;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <div id="logs-modal" class="modal-overlay hidden" style="z-index: 2400;">
        <div class="modal-content logs-card-huge">
            <div class="modal-header" style="display:flex; justify-content:space-between; align-items:center;">
                <h3>üìú –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π</h3>
                <button class="mini-btn del-mini" onclick="clearLogs()" title="–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ª–æ–≥–∏"><i class="fa-solid fa-trash"></i></button>
            </div>
            <div class="logs-search-panel">
                <input type="text" id="log-search-nick" placeholder="–ù–∏–∫ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" class="log-input">
                <div class="date-inputs">
                    <label>–û—Ç:</label>
                    <input type="date" id="log-date-from" class="log-input">
                    <label>–î–æ:</label>
                    <input type="date" id="log-date-to" class="log-input">
                </div>
                <button class="action-btn" onclick="searchLogs()" style="background:#0077ff;">üîç –ü–æ–∏—Å–∫</button>
                <button class="action-btn" onclick="loadAllLogs()" style="background:#2a3655;">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ</button>
            </div>
            <div class="workers-list-container-new" id="logs-list" style="height: 100%; margin-top: 15px;">
                <p style="text-align:center; color:#888; margin-top:50px;">–ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ" –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∏—Å–∫</p>
            </div>
            <button class="cancel-btn-wide" onclick="closeLogsModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div id="upload-choice-modal" class="modal-overlay hidden" style="z-index: 2000;">
        <div class="modal-content warning-card" style="border-color: #aaa; width: 400px;">
            <h3>–ß—Ç–æ –∂–µ–ª–∞–µ—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å?</h3><br>
            <div class="upload-grid">
                <button class="upload-choice-btn" onclick="openUploadInput('houses')"><i class="fa-solid fa-house"></i> –î–æ–º–∞</button>
                <button class="upload-choice-btn" onclick="openUploadInput('biz')"><i class="fa-solid fa-briefcase"></i> –ë–∏–∑–Ω–µ—Å—ã</button>
                <button class="upload-choice-btn" onclick="openUploadInput('trailers')"><i class="fa-solid fa-trailer"></i> –¢—Ä–µ–π–ª–µ—Ä—ã</button>
            </div>
            <button class="logout-btn" onclick="closeUploadChoice()" style="margin-top: 20px;">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <div id="upload-input-modal" class="modal-overlay hidden" style="z-index: 2100;">
        <div class="modal-content" style="width: 600px;">
            <h3>–í—Å—Ç–∞–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ</h3>
            <p style="color: #aaa; font-size: 0.8rem; margin-bottom: 10px;">–§–æ—Ä–º–∞—Ç: –ù–∞–∑–≤–∞–Ω–∏–µ: –ò–º—è (ID), –í–ª–∞–¥–µ–ª–µ—Ü: –ù–∏–∫</p>
            <textarea id="upload-textarea" class="custom-textarea" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ: Avenue Empire (0), –í–ª–∞–¥–µ–ª–µ—Ü: Alex_Avenue..."></textarea>
            <div class="form-buttons">
                <button class="save-btn" onclick="processBatchUpload()">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                <button class="logout-btn" onclick="closeUploadInput()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div id="update-popup" class="modal-overlay hidden" style="z-index: 9999;">
        <div class="modal-content warning-card" style="border-color: #00ff88; box-shadow: 0 0 30px rgba(0,255,136,0.3);">
            <i class="fa-solid fa-rotate-right warning-icon" style="color: #00ff88;"></i>
            <h3>–í—ã—à–ª–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ!</h3>
            <p>–°–∞–π—Ç –±—ã–ª –æ–±–Ω–æ–≤–ª–µ–Ω. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.</p>
            <button class="action-btn" onclick="location.reload()" style="background: #00ff88; color: black;">–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
        </div>
    </div>

    <div id="access-denied-popup" class="modal-overlay hidden" style="z-index:2000;">
        <div class="modal-content warning-card">
            <i class="fa-solid fa-triangle-exclamation warning-icon"></i>
            <h3>–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞!</h3>
            <p>–í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ø–∞—Å—Ç—å –≤ WhiteList.</p>
            <button class="action-btn" onclick="closeAccessPopup()">–ü–æ–Ω—è—Ç–Ω–æ</button>
        </div>
    </div>

    <div id="edit-record-modal" class="modal-overlay hidden" style="z-index: 1650;">
        <div class="modal-content workers-card-new" style="height: auto;">
            <div class="modal-header"><h3>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (–ê–¥–º–∏–Ω)</h3></div>
            <div class="add-worker-form">
                <input type="hidden" id="edit-key">
                <label>–í–ª–∞–¥–µ–ª–µ—Ü</label><input type="text" id="edit-owner">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label><input type="text" id="edit-name">
                <label>–¢–∏–ø –Ω–∞—Ä—É—à–µ–Ω–∏—è</label>
                <select id="edit-violation" class="custom-select" style="border: 1px solid rgba(255,255,255,0.1);">
                    <option value="–ù–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è">–ù–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è</option>
                    <option value="–ú–∞–ø–ø–∏–Ω–≥">–ú–∞–ø–ø–∏–Ω–≥</option>
                    <option value="–ù–∞–∑–≤–∞–Ω–∏—è">–ù–∞–∑–≤–∞–Ω–∏—è</option>
                    <option value="–ú–∞–ø–ø–∏–Ω–≥ + –Ω–∞–∑–≤–∞–Ω–∏—è">–ú–∞–ø–ø–∏–Ω–≥ + –Ω–∞–∑–≤–∞–Ω–∏—è</option>
                </select>
                <label>–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</label><input type="text" id="edit-proof" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –∏–ª–∏ —Ç–µ–∫—Å—Ç">
                <label>–ö—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏–ª</label><input type="text" id="edit-checkedBy" placeholder="Nick_Name">
                <div class="form-buttons">
                    <button class="save-btn" onclick="saveEditedRecord()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button class="logout-btn" onclick="closeEditRecordModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>
    </div>

    <div id="workers-modal" class="modal-overlay hidden">
        <div class="modal-content workers-card-new">
            <div id="workers-view-list">
                <div class="workers-header-top">
                    <h3 class="workers-title">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h3>
                    <button id="btn-to-add-worker" class="add-btn-small hidden" onclick="showAddWorkerForm()">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div class="workers-columns-title"><span class="col-left">–î–û–õ–ñ–ù–û–°–¢–¨</span><span class="col-right">Nick_Name</span></div>
                <div class="workers-list-container-new" id="workers-list"></div>
                <button class="cancel-btn-wide" onclick="closeWorkersModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
            <div id="workers-view-add" class="hidden">
                <div class="modal-header"><h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å</h3></div>
                <div class="add-worker-form">
                    <label>Nick Name</label>
                    <input type="text" id="worker-nick-input" placeholder="Nick_Name">
                    <label>–î–æ–ª–∂–Ω–æ—Å—Ç—å</label>
                    <select id="worker-pos-input" class="custom-input-select">
                        <option value="–†–∞–±–æ—Ç–Ω–∏–∫">–†–∞–±–æ—Ç–Ω–∏–∫</option>
                        <option value="–ó–ì–° –ú–∞–ø–ø–∏–Ω–≥–∞">–ó–ì–° –ú–∞–ø–ø–∏–Ω–≥–∞</option>
                        <option value="–ì–° –ú–∞–ø–ø–∏–Ω–≥–∞">–ì–° –ú–∞–ø–ø–∏–Ω–≥–∞</option>
                        <option value="–ö—É—Ä–∞—Ç–æ—Ä">–ö—É—Ä–∞—Ç–æ—Ä</option>
                    </select>
                    <label>LVL (1-5)</label>
                    <input type="number" id="worker-lvl-input" placeholder="1-5 (–í–ª–∏—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Ü–≤–µ—Ç)" min="1" max="5">
                    <div class="form-buttons">
                        <button class="save-btn" onclick="saveWorker()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button class="logout-btn" onclick="showWorkersList()">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="view-user-modal" class="modal-overlay hidden" style="z-index: 1200;">
        <div class="modal-content mini-profile-card" style="height: auto; width: 400px;">
            <div class="mini-profile-header">
                <div class="mini-avatar-box"><img id="view-user-avatar" src="" alt="Avatar"></div>
                <h2 id="view-user-nick">Nick</h2>
                <div id="view-user-status-container" style="margin-top: 5px;">
                    <span id="view-user-status" class="status-indicator-text offline">Offline</span>
                </div>
                <span id="view-user-role-badge" class="role-badge" style="margin-top:10px;">Role</span>
            </div>
            <div class="mini-profile-body">
                <div class="info-row"><i class="fa-brands fa-vk"></i><span id="view-user-vk">ID</span></div>
                <div class="stats-container" style="margin-top: 20px;">
                    <div class="stats-box">
                        <div class="stats-label">–ó–∞ –Ω–µ–¥–µ–ª—é</div>
                        <div id="stats-current" class="stats-value">0</div>
                    </div>
                    <div class="stats-box">
                        <div class="stats-label">–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>
                        <div id="stats-total" class="stats-value total">0</div>
                    </div>
                </div>
            </div>
            <button class="pill-btn outline" onclick="closeViewUserModal()" style="margin-top:20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div id="crop-modal" class="modal-overlay hidden" style="z-index: 1500;">
        <div class="modal-content crop-card">
            <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h3><div class="crop-container"><img id="image-to-crop" src=""></div>
            <div class="crop-buttons"><button class="save-btn" onclick="saveCroppedAvatar()">‚úî –ü—Ä–∏–º–µ–Ω–∏—Ç—å</button><button class="logout-btn" onclick="cancelCrop()">–û—Ç–º–µ–Ω–∞</button></div>
        </div>
    </div>

    <div id="profile-modal" class="modal-overlay hidden">
        <div class="modal-content new-profile-card">
            <div class="profile-layout">
                <div class="profile-left">
                    <div class="big-avatar-container">
                        <img id="profile-avatar-big" src="" alt="Avatar">
                        <button class="delete-avatar-btn" onclick="openDeleteAvatarConfirm()"><i class="fa-solid fa-trash"></i></button>
                    </div>
                    <input type="file" id="file-input" accept="image/*" hidden onchange="prepAvatarCrop()">
                    <button class="pill-btn outline" onclick="triggerFileUpload()"><i class="fa-solid fa-camera"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                    <button class="pill-btn danger" onclick="logout()"><i class="fa-solid fa-right-from-bracket"></i> –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</button>
                </div>
                <div class="profile-right">
                    <label class="info-label">–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</label>
                    <div class="info-group">
                        <div class="info-pill"><span class="pill-label">Nick Name</span><span id="profile-nick-big" class="pill-value">...</span></div>
                        <div class="info-pill"><span class="pill-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å</span><span id="profile-role" class="pill-value">...</span></div>
                        <div class="info-pill vk-pill"><span class="pill-label">VK ID</span><span id="profile-vk" class="pill-value">...</span></div>
                    </div>
                    <div class="spacer"></div>
                    <div class="profile-bottom-buttons">
                        <button class="pill-btn outline" onclick="openSettingsModal()" style="width: auto; padding: 10px 15px;"><i class="fa-solid fa-gear"></i></button>
                        <button id="btn-admin-panel" class="pill-btn admin hidden" onclick="openAdminModal()"><i class="fa-solid fa-crown"></i> –ê–¥–º–∏–Ω</button>
                        <button class="pill-btn back-btn" onclick="closeProfile()">–ù–∞–∑–∞–¥</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="delete-avatar-modal" class="modal-overlay hidden" style="z-index: 3000;">
        <div class="modal-content warning-card" style="width: 350px; border-color: #ff4757;">
            <h3>–£–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â—É—é –∞–≤–∞—Ç–∞—Ä–∫—É?</h3><br>
            <div class="form-buttons">
                <button class="save-btn" onclick="confirmDeleteAvatar()" style="background: #ff4757; color: white;">–î–∞</button>
                <button class="logout-btn" onclick="closeDeleteAvatarModal()">–ù–µ—Ç</button>
            </div>
        </div>
    </div>

    <div id="admin-modal" class="modal-overlay hidden">
        <div class="modal-content admin-card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                <h3 style="margin:0;">üëë –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</h3>
                <button class="close-icon" onclick="closeAdminModal()" style="float:none;">‚úñ</button>
            </div>
            
            <div class="admin-controls-grid">
                <button class="action-btn update-btn" onclick="pushSiteUpdate()"><i class="fa-solid fa-bullhorn"></i> –û–±—ä—è–≤–∏—Ç—å –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏</button>
                <button id="btn-toggle-maint" class="action-btn maint-btn" onclick="toggleMaintenance()"><i class="fa-solid fa-power-off"></i> –í–∫–ª—é—á–∏—Ç—å –¢–µ—Ö. –†–∞–±–æ—Ç—ã</button>
                <button class="action-btn" onclick="openSendNotificationModal()" style="background: #e94560; color: white; border: 1px solid #ff5e78;"><i class="fa-regular fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
                <button class="action-btn" onclick="openChangeDateModal()" style="background: #3c4a6e; color: white; border: 1px solid #555;"><i class="fa-regular fa-calendar"></i> –ò–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É —Å–µ–∑–æ–Ω–∞</button>
                <button class="action-btn" onclick="openBaseUsersModal()" style="background: #555; color: white; border:none; margin-top:5px;"><i class="fa-solid fa-users-line"></i> –ë–∞–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</button>
                <button class="action-btn" onclick="openLogsModal()" style="background: #e67e22; color: white; border:none; margin-top:5px;"><i class="fa-solid fa-file-lines"></i> –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π</button>
                <button class="action-btn" onclick="openAddRecordModal()" style="background: #0077ff; color: white; border:none; margin-top:5px;"><i class="fa-solid fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å (–ê–¥–º–∏–Ω)</button>
                <button class="action-btn" onclick="openGenerateRangeModal()" style="background: #6c5ce7; color: white; border:none; margin-top:5px;"><i class="fa-solid fa-list-ol"></i> –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É—Å—Ç—ã—Ö ID</button>
                <button class="action-btn delete-all-btn" onclick="openClearDatabaseChoice()"><i class="fa-solid fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É</button>
            </div>
        </div>
    </div>

    <div id="generate-range-modal" class="modal-overlay hidden" style="z-index: 2100;">
        <div class="modal-content" style="width: 400px;">
            <h3>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É—Å—Ç—ã—Ö ID</h3>
            <p style="color: #aaa; font-size: 0.8rem; margin-bottom: 15px;">–°–æ–∑–¥–∞—Å—Ç –ø—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ</p>
            <div class="add-worker-form">
                <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                <select id="gen-range-cat" class="custom-input-select">
                    <option value="houses">–î–æ–º–∞</option>
                    <option value="biz">–ë–∏–∑–Ω–µ—Å—ã</option>
                    <option value="trailers">–¢—Ä–µ–π–ª–µ—Ä—ã</option>
                </select>
                <label>–û—Ç ID</label>
                <input type="number" id="gen-range-from" placeholder="0">
                <label>–î–æ ID</label>
                <input type="number" id="gen-range-to" placeholder="100">
                <div class="form-buttons">
                    <button class="save-btn" onclick="processRangeGeneration()">–°–æ–∑–¥–∞—Ç—å</button>
                    <button class="logout-btn" onclick="closeGenerateRangeModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>
    </div>

    <div id="base-users-modal" class="modal-overlay hidden" style="z-index: 2300;">
        <div class="modal-content workers-card-new">
            <div class="modal-header"><h3>üìÇ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3></div>
            <p style="color:#aaa; font-size:0.8rem; margin-bottom:10px;">–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö, –∫—Ç–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Å–∏—Å—Ç–µ–º–µ</p>
            <div class="workers-list-container-new" id="base-users-list"><div class="loader"></div></div>
            <button class="cancel-btn-wide" onclick="closeBaseUsersModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div id="change-date-modal" class="modal-overlay hidden" style="z-index: 2300;">
        <div class="modal-content" style="width: 400px;">
            <h3>üìÖ –î–∞—Ç–∞ —Å–µ–∑–æ–Ω–∞</h3><br>
            <input type="text" id="new-date-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 16.11.2025 ‚Üí 23.11.2026">
            <div class="form-buttons"><button class="save-btn" onclick="saveNewDate()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button><button class="logout-btn" onclick="closeChangeDateModal()">–û—Ç–º–µ–Ω–∞</button></div>
        </div>
    </div>

    <div id="clear-db-modal" class="modal-overlay hidden" style="z-index: 2200;">
        <div class="modal-content warning-card" style="border-color: #ff4757; width: 400px; box-shadow: 0 0 30px rgba(255, 71, 87, 0.3);">
            <i class="fa-solid fa-triangle-exclamation warning-icon" style="color: #ff4757;"></i>
            <h3>–û–ü–ê–°–ù–ê–Ø –ó–û–ù–ê</h3><p>–ö–∞–∫—É—é —Ç–∞–±–ª–∏—Ü—É –æ—á–∏—Å—Ç–∏—Ç—å –ü–û–õ–ù–û–°–¢–¨–Æ?</p><br>
            <div class="upload-grid">
                <button class="upload-choice-btn" onclick="clearDatabase('houses')" style="border-color: #ff4757; color: #ff4757;">–î–æ–º–∞</button>
                <button class="upload-choice-btn" onclick="clearDatabase('biz')" style="border-color: #ff4757; color: #ff4757;">–ë–∏–∑–Ω–µ—Å—ã</button>
                <button class="upload-choice-btn" onclick="clearDatabase('trailers')" style="border-color: #ff4757; color: #ff4757;">–¢—Ä–µ–π–ª–µ—Ä—ã</button>
            </div>
            <button class="logout-btn" onclick="closeClearDatabaseChoice()" style="margin-top: 20px;">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <div id="add-record-modal" class="modal-overlay hidden" style="z-index: 1600;">
        <div class="modal-content workers-card-new" style="height: auto;">
            <div class="modal-header"><h3>üìù –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏–µ</h3></div>
            <div class="add-worker-form">
                <label>ID</label><input type="number" id="rec-id">
                <label>–í–ª–∞–¥–µ–ª–µ—Ü</label><input type="text" id="rec-owner">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label><input type="text" id="rec-name">
                <label>–ù–∞—Ä—É—à–µ–Ω–∏–µ</label>
                <select id="rec-violation" class="custom-select" style="border: 1px solid rgba(255,255,255,0.1);">
                    <option value="–ù–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è">–ù–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è</option>
                    <option value="–ú–∞–ø–ø–∏–Ω–≥">–ú–∞–ø–ø–∏–Ω–≥</option>
                    <option value="–ù–∞–∑–≤–∞–Ω–∏—è">–ù–∞–∑–≤–∞–Ω–∏—è</option>
                    <option value="–ú–∞–ø–ø–∏–Ω–≥ + –Ω–∞–∑–≤–∞–Ω–∏—è">–ú–∞–ø–ø–∏–Ω–≥ + –Ω–∞–∑–≤–∞–Ω–∏—è</option>
                </select>
                <label>–î–æ–∫-–≤–∞</label><input type="text" id="rec-proof">
                <div class="form-buttons"><button class="save-btn" onclick="saveRecord()">–î–æ–±–∞–≤–∏—Ç—å</button><button class="logout-btn" onclick="closeAddRecordModal()">–û—Ç–º–µ–Ω–∞</button></div>
            </div>
        </div>
    </div>

    <div id="gen-choice-modal" class="modal-overlay hidden" style="z-index: 2500;">
        <div class="modal-content" style="width: 350px;">
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ</h3>
            <p style="color:#aaa; font-size:0.8rem; margin-bottom:15px;">–î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è –∫–æ –≤—Å–µ–º –∑–∞–ø–∏—Å—è–º —Å <b>–ö—Ä–∞—Å–Ω—ã–º –∫—Ä–µ—Å—Ç–∏–∫–æ–º</b> (‚úñ) –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è, –∏–ª–∏ —Å <b>–ì–∞–ª–æ—á–∫–æ–π</b> (‚úî) –¥–ª—è Notif</p>
            <div id="gen-buttons-container" class="upload-grid"></div>
            <button class="logout-btn" onclick="closeGenChoice()" style="margin-top: 15px;">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <div id="gen-result-modal" class="modal-overlay hidden" style="z-index: 2600;">
        <div class="modal-content" style="width: 600px;">
            <h3>–ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã</h3>
            <textarea id="gen-result-text" class="custom-textarea" readonly></textarea>
            <div class="form-buttons"><button class="save-btn" onclick="copyGenResult()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button><button class="logout-btn" onclick="closeGenResult()">–ó–∞–∫—Ä—ã—Ç—å</button></div>
        </div>
    </div>

    <div id="archive-view-modal" class="modal-overlay hidden" style="z-index: 3500;">
        <div class="modal-content" style="width: 90%; max-width: 1400px; height: 90vh; display: flex; flex-direction: column; padding: 20px;">
            <div class="archive-header" style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px; margin-bottom: 15px;">
                <h2 id="archive-view-title" style="margin: 0; color: #e94560;">–ü—Ä–æ—Å–º–æ—Ç—Ä –∞—Ä—Ö–∏–≤–∞</h2>
                <span class="role-badge" style="background:#555; color:white;">READ ONLY</span>
                <button class="close-icon" onclick="closeArchiveViewer()" style="font-size: 2rem;">&times;</button>
            </div>
            <div class="header-bottom" style="justify-content: flex-start; gap: 20px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 10px;">
                <nav class="nav-tabs" id="archive-tabs">
                    <button class="tab-btn active" onclick="switchArchiveTab('houses')"><i class="fa-solid fa-house"></i> –î–æ–º–∞</button>
                    <button class="tab-btn" onclick="switchArchiveTab('biz')"><i class="fa-solid fa-briefcase"></i> –ë–∏–∑–Ω–µ—Å</button>
                    <button class="tab-btn" onclick="switchArchiveTab('trailers')"><i class="fa-solid fa-trailer"></i> –¢—Ä–µ–π–ª–µ—Ä—ã</button>
                </nav>
            </div>
            <div id="archive-content-area" style="flex: 1; overflow-y: auto; margin-top: 15px; position: relative;"><div class="loader"></div></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>